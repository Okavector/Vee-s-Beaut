<!DOCTYPE html>
<html lang="en">
  <head>
    <link href="css/style.css" rel="stylesheet" />
    <link href="css/modern-style.css" rel="stylesheet" />
  </head>

  <body>
    <!-- Page Header Start -->
    <div class="page-header mb-5">
      <div class="container-fluid">
      <div
        class="d-flex flex-column align-items-center justify-content-center"
        style="min-height: 200px"
      >
        <h1 class="font-weight-bold mb-3 text-gradient">Checkout</h1>
        <div class="d-inline-flex"></div>
      </div>
      </div>
    </div>
    <!-- Page Header End -->

    <!-- Checkout Start -->
    <div class="section-padding">
      <div class="container-fluid">
      <div class="row px-xl-5">
        <div class="col-lg-8">
          <div class="card p-4 mb-4">
            <h4 class="font-weight-semi-bold mb-4">Billing Address</h4>
            <div class="row space-y-4">
              <div class="col-md-6 form-group">
                <label>First Name</label>
                <input class="form-control" type="text" placeholder="Enter first name" />
              </div>
              <div class="col-md-6 form-group">
                <label>Last Name</label>
                <input class="form-control" type="text" placeholder="Enter last name" />
              </div>
              <div class="col-md-6 form-group">
                <label>E-mail</label>
                <input
                  class="form-control"
                  type="email"
                  placeholder="example@email.com"
                />
              </div>
              <div class="col-md-6 form-group">
                <label>Mobile No</label>
                <input
                  class="form-control"
                  type="text"
                  placeholder="+234 123 456 789"
                />
              </div>
              <div class="col-md-6 form-group">
                <label>Address</label>
                <input
                  class="form-control"
                  type="text"
                  placeholder="Enter your address"
                />
              </div>

              <div class="col-md-6 form-group">
                <label>Country</label>
                <select class="custom-select">
                  <option selected>Nigeria</option>
                </select>
              </div>
              <div class="col-md-6 form-group">
                <label>City</label>
                <input class="form-control" type="text" placeholder="Enter city" />
              </div>
              <div class="col-md-6 form-group">
                <label>State</label>
                <input class="form-control" type="text" placeholder="Enter state" />
              </div>

              <div class="col-md-12 form-group">
                <div class="custom-control custom-checkbox">
                  <input
                    type="checkbox"
                    class="custom-control-input"
                    id="newaccount"
                  />
                  <label class="custom-control-label" for="newaccount"
                    >Create an account</label
                  >
                </div>
              </div>
              <div class="col-md-12 form-group">
                <div class="custom-control custom-checkbox">
                  <input
                    type="checkbox"
                    class="custom-control-input"
                    id="shipto"
                  />
                  <label
                    class="custom-control-label"
                    for="shipto"
                    data-toggle="collapse"
                    data-target="#shipping-address"
                    >Ship to different address</label
                  >
                </div>
              </div>
            </div>
          </div>
          <div class="collapse card p-4 mb-4" id="shipping-address">
            <h4 class="font-weight-semi-bold mb-4">Shipping Address</h4>
            <div class="row space-y-4">
              <div class="col-md-6 form-group">
                <label>First Name</label>
                <input class="form-control" type="text" placeholder="Enter first name" />
              </div>
              <div class="col-md-6 form-group">
                <label>Last Name</label>
                <input class="form-control" type="text" placeholder="Enter last name" />
              </div>
              <div class="col-md-6 form-group">
                <label>E-mail</label>
                <input
                  class="form-control"
                  type="email"
                  placeholder="example@email.com"
                />
              </div>
              <div class="col-md-6 form-group">
                <label>Mobile No</label>
                <input
                  class="form-control"
                  type="text"
                  placeholder="+234 123 456 789"
                />
              </div>
              <div class="col-md-6 form-group">
                <label>Address</label>
                <input
                  class="form-control"
                  type="text"
                  placeholder="Enter address"
                />
              </div>

              <div class="col-md-6 form-group">
                <label>Country</label>
                <select class="custom-select">
                  <option selected>Nigeria</option>
                </select>
              </div>
              <div class="col-md-6 form-group">
                <label>City</label>
                <input class="form-control" type="text" placeholder="Enter city" />
              </div>
              <div class="col-md-6 form-group">
                <label>State</label>
                <input class="form-control" type="text" placeholder="Enter state" />
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-4">
          <div class="card mb-5">
            <div class="card-header">
              <h4 class="font-weight-semi-bold m-0">Order Total</h4>
            </div>

            <div class="card-body space-y-4" id="checkout-products">

  <!-- Products will be injected here -->
</div>

<div class="d-flex justify-content-between mb-3 pt-1">
  <h6 class="font-weight-medium">Subtotal</h6>
  <h6 class="font-weight-medium price" id="checkout-subtotal">₦0.00</h6>
</div>
<div class="d-flex justify-content-between">
  <h6 class="font-weight-medium">Shipping</h6>
  <h6 class="font-weight-medium price" id="checkout-shipping">₦1,000.00</h6>
</div>
<div class="d-flex justify-content-between mt-2">
  <h5 class="font-weight-bold">Total</h5>
  <h5 class="font-weight-bold price" id="checkout-total">₦1,000.00</h5>
</div>

          <div class="card mb-5">
            <div class="card-header">
              <h4 class="font-weight-semi-bold m-0">Payment</h4>
            </div>
            <div class="card-body space-y-4">
              <div class="form-group">
                <div class="custom-control custom-radio">
                  <input
                    type="radio"
                    class="custom-control-input"
                    name="payment"
                    id="paypal"
                  />
                  <label class="custom-control-label" for="paypal"
                    >Paystack</label
                  >
                </div>
              </div>
              <div class="form-group">
                <div class="custom-control custom-radio">
                  <input
                    type="radio"
                    class="custom-control-input"
                    name="payment"
                    id="directcheck"
                  />
                  <label class="custom-control-label" for="directcheck"
                    >Whatsapp</label
                  >
                </div>
              </div>
              <div class="">
                <div class="custom-control custom-radio">
                  <input
                    type="radio"
                    class="custom-control-input"
                    name="payment"
                    id="banktransfer"
                  />
                  <label class="custom-control-label" for="banktransfer"
                    >Bank Transfer</label
                  >
                </div>
              </div>
            </div>
            <div class="card-footer">
              <button
                class="btn btn-lg w-100 btn-primary font-weight-bold my-3"
              >
                Place Order
              </button>
            </div>
          </div>
        </div>
      </div>
      </div>
    </div>
    <!-- Checkout End -->

        <!-- Back to Top -->
    <a href="#" class="btn btn-primary back-to-top"
      ><i class="fa fa-angle-double-up"></i
    ></a>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>

    <!-- Contact Javascript File -->
    <script src="mail/jqBootstrapValidation.min.js"></script>
    <script src="mail/contact.js"></script>

    <!-- Template Javascript -->
    <script src="js/checkout.js"></script>

    <script>
  document.addEventListener("DOMContentLoaded", function () {
    const placeOrderBtn = document.querySelector(".btn-primary"); // your button
    placeOrderBtn.addEventListener("click", function (e) {
      e.preventDefault(); // stop form default (optional)

      // Get form data
      const firstName = document.querySelector('input[placeholder="Enter first name"]').value.trim();
      const lastName = document.querySelector('input[placeholder="Enter last name"]').value.trim();
      const email = document.querySelector('input[placeholder="example@email.com"]').value.trim();
      const phone = document.querySelector('input[placeholder="+234 123 456 789"]').value.trim();
      const address = document.querySelector('input[placeholder="Enter your address"]').value.trim();
      const city = document.querySelector('input[placeholder="Enter city"]').value.trim();
      const state = document.querySelector('input[placeholder="Enter state"]').value.trim();

      // Validate required fields
      if (!firstName || !lastName || !email || !phone || !address) {
        alert("Please fill in all required billing information.");
        return;
      }

      // check which payment option was selected
      const selectedPayment = document.querySelector('input[name="payment"]:checked');

      if (!selectedPayment) {
        alert("Please select a payment method.");
        return;
      }

      if (selectedPayment.id === "banktransfer") {
        // Get cart and total amount
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        const totalAmount = document
          .getElementById("checkout-total")
          .textContent.replace(/[^\d]/g, ""); // extract numbers only
        
        // Create customer info object
        const customerInfo = {
          fullName: `${firstName} ${lastName}`,
          email: email,
          phone: phone,
          address: `${address}, ${city}, ${state}`,
          cartItems: cart
        };

        // Store customer info temporarily for bank transfer page
        localStorage.setItem("pendingOrder", JSON.stringify(customerInfo));

        // redirect to bank-transfer.html with amount
        window.location.href = `bank-transfer.html?amount=${totalAmount}`;
      } else {
        alert("Other payment options are not set up yet.");
      }
    });
  });
</script>

  </body>
</html>